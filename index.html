<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RNG World</title>

<style>
body{
    margin:0;
    overflow:hidden;
    font-family:Arial;
}

/* ===== STATS BAR ===== */

#stats{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    background:#000000aa;
    color:white;
    padding:10px 20px;
    font-size:20px;
    display:flex;
    gap:30px;
    z-index:20;
}

/* ===== WORLD ===== */

#world{
    position:fixed;
    inset:0;
    background:#1a1a1a;
    background-image:url("https://i.imgur.com/AcBA0Pi.jpeg");
    background-size:cover;
    background-position:center;
    background-attachment:fixed;
    overflow:hidden;
}

.ground{
    position:absolute;
    bottom:0;
    height:180px;
    width:100%;
    background:transparent;
}

/* RIVER */
.river{
    position:absolute;
    bottom:0;
    height:120px;
    width:200px;
    background:transparent;
}

/* ===== WHEEL TOP ===== */

#wheelWrap{
    position:fixed;
    top:60px;
    left:50%;
    transform:translateX(-50%);
    width:900px;
    height:140px;
    overflow:hidden;
    background:#111;
    border:3px solid white;
    border-radius:12px;
}

#wheel{
    display:flex;
}

.item{
    width:140px;
    height:140px;
    margin:0 4px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#222;
    border-radius:10px;
}

.item img{
    width:120px;
    height:120px;
    border-radius:8px;
}

/* PIN TOP */

#pin{
    position:fixed;
    top:40px;
    left:50%;
    transform:translateX(-50%);
    font-size:50px;
    color:red;
    z-index:10;
}

/* ===== BUTTONS BOTTOM ===== */

#ui{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    z-index:15;
}

/* ROLL BUTTON - LARGER */
#spinBtn{
    padding:18px 80px;
    font-size:28px;
    font-weight:bold;
    background:#2a2a2a;
    color:white;
    border:3px solid #555;
    border-radius:12px;
    cursor:pointer;
    text-shadow:2px 2px 4px rgba(0,0,0,0.8);
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.2),
        inset 0 -2px 0 rgba(0,0,0,0.5),
        0 8px 16px rgba(0,0,0,0.6),
        0 0 0 2px rgba(255,255,255,0.3);
    transition:all 0.1s;
    clip-path:polygon(15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%, 0% 50%);
}

#spinBtn:hover{
    background:#3a3a3a;
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.3),
        inset 0 -2px 0 rgba(0,0,0,0.6),
        0 12px 20px rgba(0,0,0,0.8),
        0 0 0 2px rgba(255,255,255,0.4);
}

#spinBtn:active{
    background:#1a1a1a;
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.1),
        inset 0 -2px 0 rgba(0,0,0,0.8),
        0 2px 4px rgba(0,0,0,0.4),
        inset 0 0 8px rgba(0,0,0,0.4);
    transform:translateY(2px);
}

/* SKIP BUTTON - SMALLER */
#skipBtn{
    padding:10px 45px;
    font-size:18px;
    font-weight:bold;
    background:#2a2a2a;
    color:white;
    border:3px solid #555;
    border-radius:12px;
    cursor:pointer;
    text-shadow:2px 2px 4px rgba(0,0,0,0.8);
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.2),
        inset 0 -2px 0 rgba(0,0,0,0.5),
        0 8px 16px rgba(0,0,0,0.6),
        0 0 0 2px rgba(255,255,255,0.3);
    transition:all 0.1s;
    clip-path:polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%);
}

#skipBtn:hover{
    background:#3a3a3a;
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.3),
        inset 0 -2px 0 rgba(0,0,0,0.6),
        0 12px 20px rgba(0,0,0,0.8),
        0 0 0 2px rgba(255,255,255,0.4);
}

#skipBtn:active{
    background:#1a1a1a;
    box-shadow:
        inset 0 2px 0 rgba(255,255,255,0.1),
        inset 0 -2px 0 rgba(0,0,0,0.8),
        0 2px 4px rgba(0,0,0,0.4),
        inset 0 0 8px rgba(0,0,0,0.4);
    transform:translateY(2px);
}

/* ===== MUSIC BUTTON BOTTOM RIGHT ===== */

#musicBtn{
    position:fixed;
    bottom:30px;
    right:30px;
    padding:12px 20px;
    font-size:20px;
    font-weight:bold;
    border-radius:8px;
    border:3px solid #333;
    background:linear-gradient(180deg, #4caf50 0%, #388e3c 100%);
    color:white;
    cursor:pointer;
    text-shadow:2px 2px 4px rgba(0,0,0,0.5);
    box-shadow:0 4px 8px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2);
    transition:all 0.1s;
    z-index:15;
}

#musicBtn:hover{
    background:linear-gradient(180deg, #66bb6a 0%, #43a047 100%);
    transform:translateY(-2px);
    box-shadow:0 6px 12px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.3);
}

#musicBtn:active{
    transform:translateY(0);
    box-shadow:0 2px 4px rgba(0,0,0,0.4), inset 0 1px 0 rgba(0,0,0,0.2);
}

/* ===== INVENTORY BUTTON TOP LEFT ===== */

#inventoryBtn{
    position:fixed;
    top:20px;
    left:20px;
    padding:12px 20px;
    font-size:18px;
    font-weight:bold;
    border-radius:8px;
    border:3px solid #333;
    background:linear-gradient(180deg, #4caf50 0%, #388e3c 100%);
    color:white;
    cursor:pointer;
    text-shadow:2px 2px 4px rgba(0,0,0,0.5);
    box-shadow:0 4px 8px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2);
    transition:all 0.1s;
    z-index:15;
}

#inventoryBtn:hover{
    background:linear-gradient(180deg, #66bb6a 0%, #43a047 100%);
    transform:translateY(-2px);
    box-shadow:0 6px 12px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.3);
}

/* ===== INVENTORY MODAL ===== */

#inventoryModal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.9);
    display:none;
    z-index:500;
    overflow-y:auto;
    padding:20px;
}

.inventory-container{
    max-width:1200px;
    margin:0 auto;
    background:#222;
    border:3px solid #4caf50;
    border-radius:12px;
    padding:30px;
}

.inventory-header{
    color:white;
    font-size:32px;
    font-weight:bold;
    margin-bottom:20px;
    text-align:center;
}

.close-inventory{
    float:right;
    font-size:28px;
    font-weight:bold;
    color:white;
    cursor:pointer;
    background:linear-gradient(180deg, #4caf50 0%, #388e3c 100%);
    border:none;
    padding:10px 20px;
    border-radius:8px;
}

.close-inventory:hover{
    background:linear-gradient(180deg, #66bb6a 0%, #43a047 100%);
}

.inventory-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
    gap:20px;
    margin-top:40px;
    clear:both;
}

.inventory-item{
    background:#333;
    border:2px solid #555;
    border-radius:8px;
    padding:15px;
    text-align:center;
    transition:all 0.3s;
}

.inventory-item:hover{
    transform:translateY(-5px);
    border-color:#4caf50;
    box-shadow:0 0 20px rgba(76,175,80,0.5);
}

.inventory-item-image{
    width:100%;
    height:150px;
    object-fit:cover;
    border-radius:6px;
    margin-bottom:10px;
}

.inventory-item-name{
    font-size:18px;
    font-weight:bold;
    color:white;
    margin-bottom:8px;
}

.inventory-item-rarity{
    font-size:14px;
    font-weight:bold;
    padding:5px 10px;
    border-radius:4px;
    margin-bottom:8px;
    display:inline-block;
}

.inventory-item-count{
    font-size:16px;
    color:#aaa;
}

.rarity-common{
    background:#888;
    color:white;
}

.rarity-rare{
    background:#2196f3;
    color:white;
}

.rarity-ultra{
    background:#9c27b0;
    color:white;
}

.rarity-mythic{
    background:#ff9800;
    color:white;
}

.rarity-divine{
    background:#ffd700;
    color:#000;
}

/* ===== POPUP ===== */

#popup{
    position:fixed;
    top:40%;
    left:50%;
    transform:translateX(-50%);
    font-size:60px;
    font-weight:bold;
    display:none;
}

/* FLASH */

#flash{
    position:fixed;
    inset:0;
    opacity:0;
    pointer-events:none;
    transition:opacity .2s;
}
</style>
</head>

<body>

<!-- ===== STATS BAR ===== -->
<div id="stats">
    <div>Total Spins: <span id="s_total">0</span></div>
    <div>Common: <span id="s_common">0</span></div>
    <div>Rare: <span id="s_rare">0</span></div>
    <div>Ultra: <span id="s_ultra">0</span></div>
    <div>Mythic: <span id="s_mythic">0</span></div>
    <div>Divine: <span id="s_divine">0</span></div>
</div>

<!-- ===== INVENTORY BUTTON ===== -->
<button id="inventoryBtn">ðŸ“¦ Inventory</button>

<!-- ===== INVENTORY MODAL ===== -->
<div id="inventoryModal">
    <div class="inventory-container">
        <button class="close-inventory">&times;</button>
        <div class="inventory-header">ðŸ“¦ Your Inventory</div>
        <div class="inventory-grid" id="inventoryGrid"></div>
    </div>
</div>

<div id="world">
    <div class="ground"></div>
</div>

<div id="pin">â–¼</div>

<div id="wheelWrap">
    <div id="wheel"></div>
</div>

<div id="ui">
    <button id="spinBtn">ROLL</button>
    <button id="skipBtn">SKIP</button>
</div>

<button id="musicBtn">ðŸ”Š ON</button>

<div id="popup"></div>
<div id="flash"></div>

<audio id="bgMusic" loop crossOrigin="anonymous"></audio>
<audio id="tick" src="tick.mp3"></audio>
<audio id="spinSound" src="spin.mp3"></audio>

<script>

/* ===== INVENTORY SYSTEM ===== */

let inventory={};

function updateInventory(meme){
    const memeKey=meme.img;
    if(!inventory[memeKey]){
        inventory[memeKey]={
            img:meme.img,
            name:meme.name,
            rarity:meme.rarity,
            count:0
        };
    }
    inventory[memeKey].count++;
    saveInventory();
}

function loadInventory(){
    let saved=localStorage.getItem("rngWorldInventory");
    if(saved){
        inventory=JSON.parse(saved);
    }
}

function saveInventory(){
    localStorage.setItem("rngWorldInventory",JSON.stringify(inventory));
}

function displayInventory(){
    const rarityOrder={Divine:0,Mythic:1,Ultra:2,Rare:3,Common:4};
    
    let items=Object.values(inventory).sort((a,b)=>{
        return rarityOrder[a.rarity]-rarityOrder[b.rarity];
    });

    let html="";
    items.forEach(item=>{
        html+=`
            <div class="inventory-item">
                <img src="${item.img}" class="inventory-item-image" alt="${item.name}">
                <div class="inventory-item-name">${item.name}</div>
                <div class="inventory-item-rarity rarity-${item.rarity.toLowerCase()}">${item.rarity}</div>
                <div class="inventory-item-count">x${item.count}</div>
            </div>
        `;
    });

    if(items.length===0){
        html="<div style='grid-column:1/-1;color:white;font-size:18px;text-align:center;padding:40px;'>No items yet! Start spinning to collect memes!</div>";
    }

    document.getElementById("inventoryGrid").innerHTML=html;
}

document.getElementById("inventoryBtn").onclick=()=>{
    document.getElementById("inventoryModal").style.display="block";
    displayInventory();
};

document.querySelector(".close-inventory").onclick=()=>{
    document.getElementById("inventoryModal").style.display="none";
};

document.getElementById("inventoryModal").onclick=(e)=>{
    if(e.target.id==="inventoryModal"){
        document.getElementById("inventoryModal").style.display="none";
    }
};

/* ===== PROGRESS SAVING SYSTEM ===== */

function loadProgress(){
    let saved=localStorage.getItem("rngWorldProgress");
    if(saved){
        stats=JSON.parse(saved);
        updateStats();
    }
}

function saveProgress(){
    localStorage.setItem("rngWorldProgress",JSON.stringify(stats));
}

// Save progress every 5 seconds
setInterval(saveProgress,5000);

// Save progress when user leaves
window.addEventListener("beforeunload",saveProgress);

/* ===== BACKGROUND MUSIC ===== */

let musicOn=true;
let musicStarted=false;
const bgMusic=document.getElementById("bgMusic");
const musicBtn=document.getElementById("musicBtn");

// BLUE BOI - LAKEY INSPIRED (Direct MP3)
bgMusic.src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3";
bgMusic.volume=0.3;

// Start music on first user interaction
document.addEventListener("click",()=>{
    if(!musicStarted && musicOn){
        bgMusic.play().catch(e=>{
            console.log("Music autoplay blocked by browser");
        });
        musicStarted=true;
    }
},{ once: true });

musicBtn.onclick=(e)=>{
    e.stopPropagation();
    musicOn=!musicOn;
    if(musicOn){
        bgMusic.play().catch(e=>console.log("Music play error:",e));
        musicBtn.innerText="ðŸ”Š ON";
    }else{
        bgMusic.pause();
        musicBtn.innerText="ðŸ”‡ OFF";
    }
};

/* ===== STATS SYSTEM ===== */

let stats={
    total:0,
    Common:0,
    Rare:0,
    Ultra:0,
    Mythic:0,
    Divine:0
};

function updateStats(){
    document.getElementById("s_total").innerText=stats.total;
    document.getElementById("s_common").innerText=stats.Common;
    document.getElementById("s_rare").innerText=stats.Rare;
    document.getElementById("s_ultra").innerText=stats.Ultra;
    document.getElementById("s_mythic").innerText=stats.Mythic;
    document.getElementById("s_divine").innerText=stats.Divine;
}

/* ===== RNG WITH FIXED RARITIES ===== */

const RARITIES=[
    {name:"Common",chance:55,color:"#888"},
    {name:"Rare",chance:25,color:"#2196f3"},
    {name:"Ultra",chance:15,color:"#9c27b0"},
    {name:"Mythic",chance:4,color:"#ff9800"},
    {name:"Divine",chance:1,color:"#ffd700"}
];

// EACH MEME HAS A FIXED RARITY AND NAME
const MEMES=[
    // COMMON MEMES
    {img:"https://tr.rbxcdn.com/180DAY-606ca64534097142dce243ccd5988396/256/256/Image/Webp/noFilter",rarity:"Common",name:"Jailbreak"},
    {img:"https://media.printables.com/media/prints/f93e3964-5fcd-4b5f-babd-666181369861/images/9717723_5707a8e8-b112-4ced-8490-84b34298042a_b7b59ebd-1401-46e4-961e-7e5ce8d636e2/thumbs/inside/1280x960/png/screenshot-2025-05-09-192850.webp",rarity:"Common",name:"Tung Tung Tung Sahur"},
    {img:"https://i.imgflip.com/2fm6x.jpg",rarity:"Common",name:"Happy Face"},
    
    // RARE MEMES
    {img:"https://i.imgflip.com/1g8my.jpg",rarity:"Rare",name:"Thinking Guy"},
    {img:"https://i.imgflip.com/265k.jpg",rarity:"Rare",name:"Cool Dude"},
    
    // ULTRA MEMES
    {img:"",rarity:"Ultra",name:"Roblox"},
    {img:"https://media.tenor.com/oU5NLpoWR4EAAAAe/jonah-hill-annoyed.png",rarity:"Ultra",name:"Jonah Hill"},
    
    // MYTHIC MEMES
    {img:"",name:"Mythic doge"},
    
    // DIVINE MEMES
    {img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSjisKTf36HBep5stP-SPHu1yGU8v9uwqyv8A&s",name:"Nyan cat"}
];

const wheel=document.getElementById("wheel");

function buildWheel(){
    wheel.innerHTML="";
    for(let i=0;i<400;i++){ 
        let m=MEMES[i%MEMES.length];
        let r=RARITIES.find(x=>x.name===m.rarity);

        let d=document.createElement("div");
        d.className="item";
        d.style.boxShadow=`0 0 20px ${r.color}`;
        d.innerHTML=`<img src="${m.img}">`;

        wheel.appendChild(d);
    }
}
buildWheel();

function pick(){
    let roll=Math.random()*100;
    let sum=0;
    for(let r of RARITIES){
        sum+=r.chance;
        if(roll<=sum){
            let pool=MEMES.filter(m=>m.rarity===r.name);
            return pool[Math.floor(Math.random()*pool.length)];
        }
    }
    return MEMES[0];
}

/* ===== SPIN SYSTEM WITH RANDOM START ===== */

let spinning=false;
let tickInterval;
let spinStart;

document.getElementById("spinBtn").onclick=startSpin;
document.getElementById("skipBtn").onclick=skipSpin;

function startSpin(){

    if(spinning) return;
    spinning=true;

    wheel.style.transition="none";
    
    // RANDOM START POSITION
    let randomStart=Math.floor(Math.random()*9000);
    wheel.style.transform=`translateX(-${randomStart}px)`;
    wheel.offsetHeight;

    let duration=6000;
    spinStart=performance.now();

    startTickSound();
    playSpinSound();

    function anim(t){

        let p=(t-spinStart)/duration;
        if(p>1)p=1;

        let ease=1-Math.pow(1-p,3);
        let move=ease*9000;

        wheel.style.transform=`translateX(-${randomStart+move}px)`;

        updateTickSpeed(p);

        if(p<1 && spinning){
            requestAnimationFrame(anim);
        }else{
            finishSpin();
        }
    }

    requestAnimationFrame(anim);
}

function startTickSound(){
    let t=document.getElementById("tick");
    tickInterval=setInterval(()=>{
        t.currentTime=0;
        t.play().catch(e=>console.log("Audio play failed:",e));
    },60);
}

function updateTickSpeed(progress){
    clearInterval(tickInterval);
    let speed=60+(progress*300);
    tickInterval=setInterval(()=>{
        let t=document.getElementById("tick");
        t.currentTime=0;
        t.play().catch(e=>console.log("Audio play failed:",e));
    },speed);
}

function playSpinSound(){
    let sound=document.getElementById("spinSound");
    sound.currentTime=0;
    sound.play().catch(e=>console.log("Spin sound failed:",e));
}

function skipSpin(){
    if(!spinning)return;
    spinning=false;
    finishSpin();
}

function finishSpin(){

    clearInterval(tickInterval);

    let meme=pick();
    let r=RARITIES.find(x=>x.name===meme.rarity);

    /* UPDATE STATS */
    stats.total++;
    stats[r.name]++;
    updateStats();

    /* UPDATE INVENTORY */
    updateInventory(meme);

    showPopup(r);
    flash(r.color);

    spinning=false;
}

function showPopup(r){
    let p=document.getElementById("popup");
    p.innerText=r.name;
    p.style.color=r.color;
    p.style.display="block";
    setTimeout(()=>p.style.display="none",1500);
}

function flash(color){
    let f=document.getElementById("flash");
    f.style.background=color;
    f.style.opacity="0.5";
    setTimeout(()=>f.style.opacity="0",300);
}

/* ===== INITIALIZE ON PAGE LOAD ===== */

loadProgress();
loadInventory();

</script>
</body>
</html>
